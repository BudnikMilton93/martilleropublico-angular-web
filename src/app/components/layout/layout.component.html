<!-- HEADER -->
<header [ngClass]="{ 'scrolled': isScrolled }"
  class="bg-[#545353] text-white shadow-md fixed top-0 w-full z-50 transition-all duration-300 ease-in-out">
  <div
    class="container mx-auto flex flex-wrap items-center justify-between p-2 transition-all duration-300 ease-in-out">
    <a routerLink="/" class="flex items-center space-x-3">
      <img src="assets/images/home/LOGO ZM.png" alt="Logo Martillero" class="w-13 h-12 object-cover" />
      <span class="text-lg font-bold">Martillero y Corredor Público</span>
    </a>

    <!-- Menú Desktop -->
    <nav class="hidden md:flex space-x-6 font-medium bg-[#545353]">
      <a routerLink="/" routerLinkActive="text-[#E0A96D]" [routerLinkActiveOptions]="{ exact: true }"
        class="hover:text-[#E0A96D] transition"> Inicio</a>
      <a routerLink="/servicios" routerLinkActive="text-[#E0A96D]" [routerLinkActiveOptions]="{ exact: true }"
        class="hover:text-[#E0A96D] transition">Servicios</a>
      <a routerLink="/propiedades" routerLinkActive="text-[#E0A96D]" [routerLinkActiveOptions]="{ exact: true }"
        class="hover:text-[#E0A96D] transition">Propiedades</a>
      <a routerLink="/contacto" routerLinkActive="text-[#E0A96D]" [routerLinkActiveOptions]="{ exact: true }"
        class="hover:text-[#E0A96D] transition">Contacto</a>

      <!-- SOLO si el usuario está logueado -->
      <a *ngIf="isLoggedIn" routerLink="/menu" routerLinkActive="text-[#E0A96D]"
        [routerLinkActiveOptions]="{ exact: true }" class="hover:text-[#E0A96D] transition">Menú</a>

      <!-- SOLO si NO está logueado -->
      <a *ngIf="!isLoggedIn" routerLink="/login" routerLinkActive="text-[#E0A96D]"
        [routerLinkActiveOptions]="{ exact: true }" class="hover:text-[#E0A96D] transition">Login</a>

      <!-- Botón de Cerrar sesión -->
      <div *ngIf="isLoggedIn" class="relative ml-4">
        <button (click)="userMenuOpen = !userMenuOpen" class="flex items-center space-x-2 focus:outline-none">
          <svg class="w-6 h-6 text-[#E0A96D]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="18" x2="21" y2="18" />
          </svg>
        </button>

        <!-- Menú desplegable -->
        <div *ngIf="userMenuOpen" class="absolute right-0 mt-2 w-48 bg-white text-black rounded shadow-lg z-50">
          <div class="px-4 py-2 border-b border-gray-200">{{ usuarioNombre }}</div>
          <button (click)="logout()" class="w-full text-left px-4 py-2 hover:bg-gray-200">Cerrar sesión</button>
        </div>
      </div>
    </nav>

    <!-- Menú móvil -->
    <button class="md:hidden focus:outline-none" (click)="toggleMenu()">
      <svg class="w-8 h-8 text-[#E0A96D]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
        stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="6" x2="21" y2="6" />
        <line x1="3" y1="12" x2="21" y2="12" />
        <line x1="3" y1="18" x2="21" y2="18" />
      </svg>
    </button>
  </div>

  <!-- Menú móvil desplegable -->
  <nav *ngIf="mobileMenuOpen" class="bg-[#545353] md:hidden">
    <a routerLink="/" class="block px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]" (click)="closeMenu()">Inicio</a>
    <a routerLink="/servicios" class="block px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]"
      (click)="closeMenu()">Servicios</a>
    <a routerLink="/propiedades" class="block px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]"
      (click)="closeMenu()">Propiedades</a>
    <a routerLink="/contacto" class="block px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]"
      (click)="closeMenu()">Contacto</a>

    <!-- Opciones según login -->
    <a *ngIf="isLoggedIn" routerLink="/menu" class="block px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]"
      (click)="closeMenu()">Menú</a>
    <a *ngIf="!isLoggedIn" routerLink="/login" class="block px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]"
      (click)="closeMenu()">Login</a>
    <button *ngIf="isLoggedIn" (click)="logout(); closeMenu()"
      class="block w-full text-left px-4 py-2 hover:bg-[#E0A96D] hover:text-[#545353]">Cerrar sesión</button>
  </nav>
</header>

<!-- CONTENIDO DE LAS PÁGINAS -->
<main class="min-h-screen">
  <router-outlet></router-outlet>
</main>

<!-- FOOTER -->
<footer class="bg-[#545353] text-white py-6 mt-10">
  <div class="container mx-auto text-center text-sm">
    <p>© 2025 Z&M Propiedades - Chos Malal, Neuquén</p>
    <p class="mt-1">Sitio desarrollado por Milton Budnik</p>
  </div>
</footer>